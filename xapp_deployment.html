<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>xApp Deployment - General Guidelines &mdash; OAIC 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="This document describes how to write an xApp and how to deploy it on the RIC platform." href="xapp_example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> OAIC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="oaic_features.html">OAIC Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Background Information:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="background_cloud.html">Background on Docker, Kubernetes &amp; Helm</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_oran_architecture.html">O-RAN Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="background_srsRAN.html">RAN Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation Procedures:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Hardware and Software Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="oran_installation.html">O-RAN Near-Real Time RIC Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsRAN_installation.html">srsRAN with E2 Agent Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup5gnetwork.html">Starting EPC/NodeB/UE(s)</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsRAN_additional_features.html">Additional Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="a1mediator.html">A1 Mediator Installation Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">xApp Deployment:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="xapp_example.html">This document describes how to write an xApp and how to deploy it on the RIC platform.</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_example.html#getting-started-developing-xapps">Getting started: Developing xapps</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_example.html#the-xapp-frame-common-functions-and-interfaces">The Xapp Frame common functions and interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_example.html#hello-world-xapp-code-and-deployment">Hello world xAPP code and deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="xapp_example.html#software-installation-and-deployment">Software Installation and Deployment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">xApp Deployment - General Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pre-requisites">Pre-requisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-an-xapp-image-registry">Create an xApp Image Registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hosting-files-on-a-web-server">Hosting Files on a Web Server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuring-the-nginx-web-server">Configuring the Nginx Web server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hosting-the-config-files">Hosting the config Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#creating-xapp-docker-image">Creating xApp Docker Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xapp-onboarder-deployment">xApp Onboarder Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dms-cli-deployment">DMS-CLI Deployment</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OAIC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>xApp Deployment - General Guidelines</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/xapp_deployment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="xapp-deployment-general-guidelines">
<h1>xApp Deployment - General Guidelines<a class="headerlink" href="#xapp-deployment-general-guidelines" title="Permalink to this headline"></a></h1>
<section id="pre-requisites">
<h2>Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permalink to this headline"></a></h2>
<section id="create-an-xapp-image-registry">
<h3>Create an xApp Image Registry<a class="headerlink" href="#create-an-xapp-image-registry" title="Permalink to this headline"></a></h3>
<p>First we need to create a registry to host our xApp images. Here we create a local docker registry called <code class="docutils literal notranslate"><span class="pre">xApp-registry.local:5008</span></code>. 5008 indicates the port number on which the registry is listening.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
<section id="hosting-files-on-a-web-server">
<h3>Hosting Files on a Web Server<a class="headerlink" href="#hosting-files-on-a-web-server" title="Permalink to this headline"></a></h3>
<p>The xApp descriptor files (config.json) must be hosted on a webserver when we use the <strong>xapp-onboarder</strong> to deploy xApps. To host these files we use Nginx to create a web server.</p>
<section id="configuring-the-nginx-web-server">
<h4>Configuring the Nginx Web server<a class="headerlink" href="#configuring-the-nginx-web-server" title="Permalink to this headline"></a></h4>
<p>First, we need to install Nginx and check if it is in <code class="docutils literal notranslate"><span class="pre">active</span> <span class="pre">(running)</span></code>  state.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo apt-get install nginx
sudo systemctl status nginx
</pre></div>
</div>
<p>Unlink the default Configuration file and check if it is unlinked</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd /etc/nginx/sites-enabled
sudo unlink default
cd ../
</pre></div>
</div>
<p>Now we create some directories which can be accessed by the server and where the config files can be hosted</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd ../../var/www
sudo mkdir xApp_config.local
cd xApp_config.local/
sudo mkdir config_files
</pre></div>
</div>
<p>Create a Custom Configuration File and define file locations</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>cd ../../../etc/nginx/conf.d
sudo vim xApp_config.local.conf
</pre></div>
</div>
<p>Paste the following content in the <em>conf</em> file.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>server {
    listen 5010 default_server;
    server_name xApp_config.local;
    location /config_files/ {

        root /var/www/xApp_config.local/;
    }

}
</pre></div>
</div>
<p>Save the configuration file and check if there are any errors in the configuration file.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>nginx -t
</pre></div>
</div>
</section>
<section id="hosting-the-config-files">
<h4>Hosting the config Files<a class="headerlink" href="#hosting-the-config-files" title="Permalink to this headline"></a></h4>
<p>Copy the xApp config file to this directory. Reload Nginx once this has been done</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>sudo cp &lt;path_to_config_file&gt;/config-file.json /var/www/xApp_config.local/config_files/
sudo systemctl reload nginx
</pre></div>
</div>
<p>Now, you can check if the config file can be accessed from the newly created server. Place all files you want to host in the <code class="docutils literal notranslate"><span class="pre">config_files</span></code> directory</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>curl http://&lt;machine_ip_addr&gt;:5010/config_files/config-file.json
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul class="simple">
<li><p>Place all files you want to host in the <code class="docutils literal notranslate"><span class="pre">config_files</span></code> directory.</p></li>
<li><p>Make sure all files have a unique name</p></li>
</ul>
</div>
</section>
</section>
</section>
<section id="creating-xapp-docker-image">
<h2>Creating xApp Docker Image<a class="headerlink" href="#creating-xapp-docker-image" title="Permalink to this headline"></a></h2>
<p>We create the xapp image using the given Dockerfile within the xApp repository.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>docker build . -t xApp-registry.local:5008/&lt;xapp-name&gt;:<span class="nt">&lt;version&gt;</span> (Example : xappkpimon:1.0.0).
</pre></div>
</div>
<p>What we are essentially doing here is that we are storing our built image in a local docker repository. This is done to keep things simple. We could use cloud servers too (in that case the image needs to be pushed to the respective server using docker push).</p>
<p>Now that we have the docker image, we need to push it to our local registry <code class="docutils literal notranslate"><span class="pre">xApp-respository.local:5008</span></code></p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>docker push xApp-repository.local:5008/&lt;xapp-name&gt;:<span class="nt">&lt;version&gt;</span>
</pre></div>
</div>
</section>
<section id="xapp-onboarder-deployment">
<h2>xApp Onboarder Deployment<a class="headerlink" href="#xapp-onboarder-deployment" title="Permalink to this headline"></a></h2>
<p>Getting Variables ready</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>export KONG_PROXY=<span class="nv">`kubectl get svc -n ricplt -l app.kubernetes.io/name=kong -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
export APPMGR_HTTP=<span class="nv">`kubectl get svc -n ricplt --field-selector metadata.name=service-ricplt-appmgr-http -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
export ONBOARDER_HTTP=<span class="nv">`kubectl get svc -n ricplt --field-selector metadata.name=service-ricplt-xapp-onboarder-http -o jsonpath=&#39;{.items[0].spec.clusterIP}&#39;`</span>
</pre></div>
</div>
<p>Get helm charts and check if the current xApp is one of them. If there is no helm chart, then we are good to go. Otherwise, we have to use the existing chart or delete it and then proceed forward.</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>curl --location --request GET &quot;http://$KONG_PROXY:32080/onboard/api/v1/charts&quot;
</pre></div>
</div>
</section>
<section id="dms-cli-deployment">
<h2>DMS-CLI Deployment<a class="headerlink" href="#dms-cli-deployment" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="xapp_example.html" class="btn btn-neutral float-left" title="This document describes how to write an xApp and how to deploy it on the RIC platform." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OAIC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>